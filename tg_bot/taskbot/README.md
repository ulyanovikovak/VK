Задание выполнено в файле bot.go


Домашнее задание №4

Срок выполнения - 3 недели

Тема: менеджер задач в телеграм боте

----

В этой задаче мы реализуем простого телеграм-бота по управлению задачами. Немного парсинга, немного моделирования данных, научитесь размещать ботов в телеграме через heroku.

Похоже на игру, просто интерфейс чуть-чуть другой. Проще чем игра - не такая мудреная логика.

Задание ИМХО простое, сильно голову ломать не придётся! Объем кода 300-400 строк, по времени делается часов за 5.

Управление происходит через текстовый интерфейс:

* `/tasks`
* `/new XXX YYY ZZZ` - создаёт новую задачу
* `/assign_$ID` - делаеть пользователя исполнителем задачи
* `/unassign_$ID` - снимает задачу с текущего исполнителя
* `/resolve_$ID` - выполняет задачу, удаляет её из списка
* `/my` - показывает задачи, которые назначены на меня
* `/owner` - показывает задачи, которые были созданы мной
Подробности форматирования смотрите в тестах.

Мы используем чуть-чуть подправленную библиотеку (:exclamation: надо делать import "github.com/skinass/telegram-bot-api/v5") для работы с телеграм-ботом, чтобы можно было написать тесты, притворившись сервером телеграма. Она лежит у нас в vendor в папке с заданием. Тесты запускаются с ней нормально через `go test -v -mod=vendor`.

После прохождения тестов задачу надо будет показать в реальном телеграме, для этого у вас есть 2 варианта:

1. `ngrok` (<https://ngrok.com/>) - пробрасывает порт к вам (после авторизации там будет команда для созранения токена в конфиге). В этом случае лучше согласовать с преподавателями время проверки, чтобы вы включили у себя. Хорошо чтобы показать что-то на демо, для прода я бы не рискнул это использовать. Попроще. Но скорее всего не будет работать из-за Роскомнадзора.
2. **DEPRECATED**: Heroku больше не предоставляют бесплатный хостинг и не позволяют регистрироваться пользователям из РФ. 
    `heroku` (<https://devcenter.heroku.com/articles/getting-started-with-go>) - они предоставляют бесплатный хостинг для го с поддоменом и сертификатом, который можно подключить к телеграму. бесплатная версия должна спать 8 часов в сутки, но для тестирования хватает.~~ Heroku больше не предоставляет беспла Посложнее. Но будет работать точно. Демо было на лекции.
3. если у вас другие два способа не заработали, то приходите к Антону Сулаеву в личку в телеге. выдадим вам отдельную виртуалку и придется там самим себе https настраивать через certbot(<https://certbot.eff.org/lets-encrypt>).

Для создания бота в телеграме стучитесь `@BotFather`

Если вы выберете `heroku` - туда надо аккуратно пушить из репы гитлаба - в лекции с ботом был пример.

Для хранения данных можно обойтись обычным слайсом и не заморачиваться с базой.

Задание можно сдать частично - только тесты, без реального бота в телеграме - половина баллов, полная оценка за показ настоящего бота.

В помощь:

* телеграм бот в 04_net2/05_bot
* остановка сервера - <https://gist.github.com/rvasily/be725f0d1125ceb45fb455082d852f43> - понадобится если вы хотите написать сервер который можно туда-сюда запускать-останавливать для разных тестов. Подсказка - там надо будет использовать select. Остановка через контекcт обсуждалась в 02_async/1_async/12_context_cancel/context_cancel.go. Но можете забить - тест пока один.

Кто хочет пройти чуть вперед - можно прикрутить БД, на хероку есть бесплатный postgres.
